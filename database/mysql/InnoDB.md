## InnoDB记录存储结构
### InnoDB 简介
InnoDb将数据划为若干个页，以页作为次盼盼和内存之间的交互的基本单位，InnoDB中的页的大小一般为16kb。也就是在一般情况下，一次最少从磁盘中读取16KB的内容到内存中，一次最少把内存中的16KB内容刷新到磁盘中。

### InnoDB行格式
#### 分类
   - Compact
   - Redundant
   - Dynamic
   - Compressed

```
CREATE TABLE demo (
         c1 VARCHAR(10),
         c2 VARCHAR(10) NOT NULL,
         c3 CHAR(10),
         c4 VARCHAR(10)
   ) CHARSET=ascii ROW_FORMAT=COMPACT;
```
#### COMPACT行格式
##### 记录的额外信息
   这部分信息是服务器为了描述这条记录而不得不额外添加的一些信息
###### 变长字段长度列表
   VARCHAR(M)、VARBINARY(M)、各种TEXT类型，各种BLOB类型，我们也可以把拥有这些数据类型的列称为变长字段,它们真正的存储空间分为两个部分:**真正的数据内容和占用的字节数**
   把所有变长字段的真实数据占用的字节长度都存放在记录的开头部位，从而形成一个变长字段长度列表，各变长字段数据占用的字节数按照列的顺序逆序存放。

   InnoDB有它的一套规则，我们首先声明一下W、M和L的意思：

   假设某个字符集中表示一个字符最多需要使用的字节数为W，也就是使用SHOW CHARSET语句的结果中的Maxlen列，比方说utf8字符集中的W就是3，gbk字符集中的W就是2，ascii字符集中的W就是1。

   对于变长类型VARCHAR(M)来说，这种类型表示能存储最多M个字符（注意是字符不是字节），所以这个类型能表示的字符串最多占用的字节数就是M×W。

   假设它实际存储的字符串占用的字节数是L。

   所以确定使用1个字节还是2个字节表示真正字符串占用的字节数的规则就是这样：

   - 如果M×W <= 255，那么使用1个字节来表示真正字符串占用的字节数
   - 如果M×W > 255，则分为两种情况：

      - 如果L <= 127，则用1个字节来表示真正字符串占用的字节数。

      - 如果L > 127，则用2个字节来表示真正字符串占用的字节数。



